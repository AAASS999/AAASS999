SELECT user
FROM friends
GROUP BY user
HAVING count(*) < 4;



----------  1.2  вывод списка  все пары Контактов, которые дружат друг с другом. Исключить дубликаты.
SELECT u1.name, u2.name
FROM friends f
LEFT JOIN users u1 ON f.user=u1.id
LEFT JOIN users u2 ON f.friend=u2.id
LEFT JOIN friends o ON f.user=o.friend AND f.friend=o.user
WHERE o.user IS NOT NULL AND f.user<f.friend
